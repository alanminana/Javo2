@model dynamic
@{
    var prefijo = ViewData["PrefijoFormaPago"]?.ToString() ?? "";
    var readOnly = ViewData["ReadOnly"] as bool? ?? false;
    var formaPagoId = prefijo + "FormaPagoID";
    var bancoId = prefijo + "BancoID";
    var tipoTarjeta = prefijo + "TipoTarjeta";
    var cuotas = prefijo + "Cuotas";
    var entidadElectronica = prefijo + "EntidadElectronica";
    var planFinanciamiento = prefijo + "PlanFinanciamiento";
}

<fieldset class="mb-4">
    <legend class="text-light">Forma de Pago</legend>
    <div class="row g-3">
        <div class="col-md-6">
            <label for="@(prefijo)FormaPagoID" class="form-label text-light">Método</label>
            <select id="@(prefijo)FormaPagoID" name="@(prefijo)FormaPagoID" class="form-select bg-secondary text-light payment-toggle" @(isReadOnly ? "disabled" : "")>
                <option value="">-- Seleccione --</option>
                @foreach (var fp in Model.FormasPago)
                {
                    <option value="@fp.Value" @(Model.FormaPagoID.ToString() == fp.Value ? "selected" : "")>@fp.Text</option>
                }
            </select>
            <span asp-validation-for="FormaPagoID" class="invalid-feedback d-block"></span>
        </div>

        <div class="col-md-6">
            <!-- Tarjeta de Crédito (FormaPagoID = 2) -->
            <div id="@(prefijo)tarjetaCreditoContainer" class="payment-container d-none">
                <div class="row g-2">
                    <div class="col-12">
                        <label for="@(prefijo)TipoTarjeta" class="form-label text-light">Tipo de Tarjeta</label>
                        <select id="@(prefijo)TipoTarjeta" name="@(prefijo)TipoTarjeta" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var tt in Model.TipoTarjetaOptions)
                            {
                                <option value="@tt.Value" @(Model.TipoTarjeta == tt.Value ? "selected" : "")>@tt.Text</option>
                            }
                        </select>
                        <span asp-validation-for="TipoTarjeta" class="invalid-feedback d-block"></span>
                    </div>
                    <div class="col-12 mt-2">
                        <label for="@(prefijo)Cuotas" class="form-label text-light">Cuotas</label>
                        <select id="@(prefijo)Cuotas" name="@(prefijo)Cuotas" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var cuota in Model.CuotasOptions)
                            {
                                <option value="@cuota.Value" @(Model.Cuotas?.ToString() == cuota.Value ? "selected" : "")>@cuota.Text</option>
                            }
                        </select>
                        <span asp-validation-for="Cuotas" class="invalid-feedback d-block"></span>
                    </div>
                    <div class="col-12 mt-2">
                        <label for="@(prefijo)BancoID" class="form-label text-light">Banco</label>
                        <select id="@(prefijo)BancoID" name="@(prefijo)BancoID" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var banco in Model.Bancos)
                            {
                                <option value="@banco.Value" @(Model.BancoID?.ToString() == banco.Value ? "selected" : "")>@banco.Text</option>
                            }
                        </select>
                        <span asp-validation-for="BancoID" class="invalid-feedback d-block"></span>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de Débito (FormaPagoID = 3) -->
            <div id="@(prefijo)tarjetaDebitoContainer" class="payment-container d-none">
                <div class="row g-2">
                    <div class="col-12">
                        <label for="@(prefijo)BancoID" class="form-label text-light">Banco</label>
                        <select id="@(prefijo)BancoID" name="@(prefijo)BancoID" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var banco in Model.Bancos)
                            {
                                <option value="@banco.Value" @(Model.BancoID?.ToString() == banco.Value ? "selected" : "")>@banco.Text</option>
                            }
                        </select>
                        <span asp-validation-for="BancoID" class="invalid-feedback d-block"></span>
                    </div>
                </div>
            </div>

            <!-- Transferencia (FormaPagoID = 4) -->
            <div id="@(prefijo)transferenciaContainer" class="payment-container d-none">
                <div class="row g-2">
                    <div class="col-12">
                        <label for="@(prefijo)BancoID" class="form-label text-light">Banco</label>
                        <select id="@(prefijo)BancoID" name="@(prefijo)BancoID" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var banco in Model.Bancos)
                            {
                                <option value="@banco.Value" @(Model.BancoID?.ToString() == banco.Value ? "selected" : "")>@banco.Text</option>
                            }
                        </select>
                        <span asp-validation-for="BancoID" class="invalid-feedback d-block"></span>
                    </div>
                </div>
            </div>

            <!-- Pago Virtual (FormaPagoID = 5) -->
            <div id="@(prefijo)pagoVirtualContainer" class="payment-container d-none">
                <div class="row g-2">
                    <div class="col-12">
                        <label for="@(prefijo)EntidadElectronica" class="form-label text-light">Entidad Electrónica</label>
                        <select id="@(prefijo)EntidadElectronica" name="@(prefijo)EntidadElectronica" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var ee in Model.EntidadesElectronicas)
                            {
                                <option value="@ee.Value" @(Model.EntidadElectronica == ee.Value ? "selected" : "")>@ee.Text</option>
                            }
                        </select>
                        <span asp-validation-for="EntidadElectronica" class="invalid-feedback d-block"></span>
                    </div>
                </div>
            </div>

            <!-- Crédito Personal (FormaPagoID = 6) -->
            <div id="@(prefijo)creditoPersonalContainer" class="payment-container d-none">
                <div class="row g-2">
                    <div class="col-12">
                        <label for="@(prefijo)PlanFinanciamiento" class="form-label text-light">Plan de Financiamiento</label>
                        <select id="@(prefijo)PlanFinanciamiento" name="@(prefijo)PlanFinanciamiento" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var pf in Model.PlanesFinanciamiento)
                            {
                                <option value="@pf.Value" @(Model.PlanFinanciamiento == pf.Value ? "selected" : "")>@pf.Text</option>
                            }
                        </select>
                        <span asp-validation-for="PlanFinanciamiento" class="invalid-feedback d-block"></span>
                    </div>
                    <div class="col-12 mt-2">
                        <label for="@(prefijo)Cuotas" class="form-label text-light">Cuotas</label>
                        <select id="@(prefijo)Cuotas" name="@(prefijo)Cuotas" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var cuota in Model.CuotasOptions)
                            {
                                <option value="@cuota.Value" @(Model.Cuotas?.ToString() == cuota.Value ? "selected" : "")>@cuota.Text</option>
                            }
                        </select>
                        <span asp-validation-for="Cuotas" class="invalid-feedback d-block"></span>
                    </div>
                </div>
            </div>

            <!-- Cheque (FormaPagoID = 7) -->
            <div id="@(prefijo)chequeContainer" class="payment-container d-none">
                <div class="row g-2">
                    <div class="col-12">
                        <label for="@(prefijo)BancoID" class="form-label text-light">Banco</label>
                        <select id="@(prefijo)BancoID" name="@(prefijo)BancoID" class="form-select bg-secondary text-light" @(isReadOnly ? "disabled" : "")>
                            <option value="">-- Seleccione --</option>
                            @foreach (var banco in Model.Bancos)
                            {
                                <option value="@banco.Value" @(Model.BancoID?.ToString() == banco.Value ? "selected" : "")>@banco.Text</option>
                            }
                        </select>
                        <span asp-validation-for="BancoID" class="invalid-feedback d-block"></span>
                    </div>
                    <div class="col-12 mt-2">
                        <label for="@(prefijo)NumeroCheque" class="form-label text-light">Número de Cheque</label>
                        <input id="@(prefijo)NumeroCheque" name="@(prefijo)NumeroCheque" class="form-control bg-secondary text-light" value="@Model.NumeroCheque" @(isReadOnly ? "readonly" : "") />
                        <span asp-validation-for="NumeroCheque" class="invalid-feedback d-block"></span>
                    </div>
                    <div class="col-12 mt-2">
                        <label for="@(prefijo)MontoCheque" class="form-label text-light">Monto</label>
                        <input type="number" id="@(prefijo)MontoCheque" name="@(prefijo)MontoCheque" class="form-control bg-secondary text-light" value="@Model.MontoCheque" min="0" step="0.01" @(isReadOnly ? "readonly" : "") />
                        <span asp-validation-for="MontoCheque" class="invalid-feedback d-block"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</fieldset>