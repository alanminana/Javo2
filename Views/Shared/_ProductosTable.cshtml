@model IEnumerable<Javo2.ViewModels.Operaciones.Productos.ProductosViewModel>
@{
    var showCheckbox = ViewData["ShowCheckbox"] as bool? ?? true;
    var showActions = ViewData["ShowActions"] as bool? ?? true;
}
@foreach (var producto in Model)
{
    <tr>
        @if (showCheckbox)
        {
            <td>
                <div class="form-check">
                    <input type="checkbox" name="ProductoIDs" value="@producto.ProductoID"
                           class="form-check-input producto-check" id="prod-@producto.ProductoID" />
                    <label class="form-check-label" for="prod-@producto.ProductoID"></label>
                </div>
            </td>
        }
        <td>@producto.Nombre</td>
        <td>@producto.PCosto.ToString("C")</td>
        <td>@producto.PContado.ToString("C")</td>
        <td>@producto.PLista.ToString("C")</td>
        <td>
            <span class="badge @(producto.CantidadDisponible > 0 ? "bg-success" : "bg-danger")">
                @producto.CantidadDisponible
            </span>
        </td>
        @if (showActions)
        {
            <td class="text-center">
                <div class="btn-group" role="group">
                    @if (User.HasPermission("productos.editar"))
                    {
                        <a asp-controller="Productos" asp-action="Edit" asp-route-id="@producto.ProductoID"
                           class="btn btn-sm btn-outline-primary" title="Editar">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        <a asp-controller="Productos" asp-action="AjusteStock" asp-route-id="@producto.ProductoID"
                           class="btn btn-sm btn-outline-primary" title="Ajustar Stock">
                            <i class="bi bi-gear"></i>
                        </a>
                    }
                    @if (User.HasPermission("productos.ver"))
                    {
                        <a asp-controller="Productos" asp-action="Details" asp-route-id="@producto.ProductoID"
                           class="btn btn-sm btn-outline-info" title="Ver">
                            <i class="bi bi-eye"></i>
                        </a>
                        <a asp-controller="Productos" asp-action="MovimientosStock" asp-route-id="@producto.ProductoID"
                           class="btn btn-sm btn-outline-success" title="Ver Movimientos">
                            <i class="bi bi-list-ol"></i>
                        </a>
                    }
                    @if (User.HasPermission("productos.eliminar"))
                    {
                        <a asp-controller="Productos" asp-action="Delete" asp-route-id="@producto.ProductoID"
                           class="btn btn-sm btn-outline-danger" title="Eliminar">
                            <i class="bi bi-trash"></i>
                        </a>
                    }
                </div>
            </td>
        }
    </tr>
}