@model IEnumerable<Javo2.ViewModels.Operaciones.Catalogo.RubroViewModel>
@foreach (var rubro in Model)
{
    <tr>
        <td scope="row">@rubro.Nombre</td>
        <td>
            @if (rubro.SubRubros != null && rubro.SubRubros.Any())
            {
                <ul class="list-unstyled mb-0">
                    @foreach (var sub in rubro.SubRubros)
                    {
                        <li>@sub.Nombre</li>
                    }
                </ul>
            }
            else
            {
                <span class="text-muted">Sin SubRubros</span>
            }
        </td>
        <td>@rubro.TotalStock</td>
        <td class="text-center">
            <div class="btn-group" role="group" aria-label="Acciones para @rubro.Nombre">
                <a asp-action="EditRubro"
                   asp-route-id="@rubro.ID"
                   class="btn btn-sm btn-outline-warning"
                   title="Editar rubro @rubro.Nombre">
                    <i class="bi bi-pencil-square" aria-hidden="true"></i>
                    <span class="visually-hidden">Editar</span>
                </a>
                <a asp-action="EditSubRubros"
                   asp-route-rubroId="@rubro.ID"
                   class="btn btn-sm btn-outline-info"
                   title="Gestionar subrubros de @rubro.Nombre">
                    <i class="bi bi-list" aria-hidden="true"></i>
                    <span class="visually-hidden">SubRubros</span>
                </a>
                <form asp-action="DeleteRubro"
                      asp-route-id="@rubro.ID"
                      method="post"
                      class="d-inline"
                      onsubmit="return confirm('¿Seguro que deseas eliminar el rubro @rubro.Nombre?');">
                    @Html.AntiForgeryToken()
                    <button type="submit"
                            class="btn btn-sm btn-outline-danger"
                            title="Eliminar rubro @rubro.Nombre">
                        <i class="bi bi-trash" aria-hidden="true"></i>
                        <span class="visually-hidden">Eliminar</span>
                    </button>
                </form>
            </div>
        </td>
    </tr>
}
