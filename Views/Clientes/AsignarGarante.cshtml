<!-- Views/Clientes/AsignarGarante.cshtml -->
@model Javo2.ViewModels.Operaciones.Clientes.GaranteViewModel
@{
    ViewData["Title"] = "Asignar Garante";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="container-fluid py-3">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2 mb-0">Asignar Garante para @Model.NombreCliente</h1>
        <a asp-action="Details" asp-route-id="@Model.ClienteID" class="btn btn-outline-light">
            <i class="bi bi-arrow-left me-1"></i> Volver al cliente
        </a>
    </div>

    <div class="card shadow-sm bg-dark text-light">
        <div class="card-body">
            <form asp-action="AsignarGarante" method="post">
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                
                <input type="hidden" asp-for="ClienteID" />
                <input type="hidden" asp-for="NombreCliente" />

                <fieldset class="mb-4">
                    <legend class="text-light">Datos Personales</legend>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="Nombre" class="form-label">Nombre</label>
                            <input asp-for="Nombre" class="form-control bg-secondary text-light" />
                            <span asp-validation-for="Nombre" class="text-danger"></span>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Apellido" class="form-label">Apellido</label>
                            <input asp-for="Apellido" class="form-control bg-secondary text-light" />
                            <span asp-validation-for="Apellido" class="text-danger"></span>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="DNI" class="form-label">DNI</label>
                            <input asp-for="DNI" type="number" class="form-control bg-secondary text-light" />
                            <span asp-validation-for="DNI" class="text-danger"></span>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Email" class="form-label">Email</label>
                            <input asp-for="Email" type="email" class="form-control bg-secondary text-light" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Telefono" class="form-label">Teléfono</label>
                            <input asp-for="Telefono" class="form-control bg-secondary text-light" />
                            <span asp-validation-for="Telefono" class="text-danger"></span>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Celular" class="form-label">Celular</label>
                            <input asp-for="Celular" class="form-control bg-secondary text-light" />
                            <span asp-validation-for="Celular" class="text-danger"></span>
                        </div>
                    </div>
                </fieldset>
                
                <fieldset class="mb-4">
                    @{
                        ViewData["ProvinciaSelectId"] = "ProvinciaID";
                        ViewData["CiudadSelectId"] = "CiudadID";
                    }
</fieldset>
<fieldset class="mb-4">
    <legend class="text-light">Información Laboral y Relación</legend>
    <div class="row g-3">
        <div class="col-md-6">
            <label asp-for="LugarTrabajo" class="form-label">Lugar de Trabajo</label>
            <input asp-for="LugarTrabajo" class="form-control bg-secondary text-light" />
            <span asp-validation-for="LugarTrabajo" class="text-danger"></span>
        </div>
        <div class="col-md-6">
            <label asp-for="IngresosMensuales" class="form-label">Ingresos Mensuales</label>
            <input asp-for="IngresosMensuales" type="number" step="0.01" class="form-control bg-secondary text-light" />
            <span asp-validation-for="IngresosMensuales" class="text-danger"></span>
        </div>
        <div class="col-md-12">
            <label asp-for="RelacionCliente" class="form-label">Relación con el Cliente</label>
            <select asp-for="RelacionCliente" class="form-select bg-secondary text-light">
                <option value="">-- Seleccione --</option>
                <option value="Familiar">Familiar</option>
                <option value="Amistad">Amistad</option>
                <option value="Laboral">Laboral</option>
                <option value="Otro">Otro</option>
            </select>
            <span asp-validation-for="RelacionCliente" class="text-danger"></span>
        </div>
    </div>
</fieldset>
<div class="d-flex justify-content-end mt-4">
    <a asp-action="Details" asp-route-id="@Model.ClienteID" class="btn btn-outline-secondary me-2">Cancelar</a>
    <button type="submit" class="btn btn-primary">Asignar Garante</button>
</div>
</form>
</div>
</div>
</section>
@section Scripts {  
    @{  
        @await Html.PartialAsync("_DireccionPartial", Model);  
        await PrepararUbicacionViewModel(viewModel);  

        @* Fix for CS1503: Removed `@await` as `Html.RenderPartialAsync` returns `void` *@  
        @Html.RenderPartialAsync("_ValidationScriptsPartial");  
        <script src="~/js/Clientes/AsignarGarante.js"></script>  
    }  
}
