@model Javo2.ViewModels.Operaciones.Clientes.ClientesViewModel

@{
    ViewData["Title"] = "Detalles del Cliente";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ViewData["Title"]</h2>

<div class="card p-4">
    <h4>Cliente: @Model.Nombre @Model.Apellido</h4>
    <p><strong>DNI:</strong> @Model.DNI</p>
    <p><strong>Email:</strong> @Model.Email</p>
    <p><strong>Teléfono:</strong> @Model.Telefono</p>
    <p><strong>Celular:</strong> @Model.Celular</p>
    <p><strong>Teléfono de Trabajo:</strong> @Model.TelefonoTrabajo</p>
    <p><strong>Verificar:</strong> @(Model.Verificar ? "Sí" : "No")</p>

    <h5>Datos Domiciliarios</h5>
    <p><strong>Calle:</strong> @Model.Calle</p>
    <p><strong>Número de Calle:</strong> @Model.NumeroCalle</p>
    <p><strong>Estado Comentario:</strong> @Model.EstadoComentario</p>
    <p><strong>Localidad:</strong> @Model.Localidad</p>
    <p><strong>Código Postal:</strong> @Model.CodigoPostal</p>
    <p><strong>Descripción Domicilio:</strong> @Model.DescripcionDomicilio</p>

    <h5>Saldo y Crédito</h5>
    <p><strong>Saldo Inicial:</strong> @Model.SaldoInicial.ToString("C")</p>
    <p><strong>Saldo Disponible:</strong> @Model.SaldoDisponible.ToString("C")</p>
    <p><strong>Saldo:</strong> @Model.Saldo.ToString("C")</p>
    <p><strong>Deuda Total:</strong> @Model.DeudaTotal.ToString("C")</p>
    <p><strong>Activo:</strong> @(Model.Activo ? "Sí" : "No")</p>
    <p><strong>Modificado Por:</strong> @Model.ModificadoPor</p>

    <h5>Historial de Compras</h5>
    @if (Model.HistorialCompras != null && Model.HistorialCompras.Count > 0)
    {
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>ID Compra</th>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Total</th>
                    <th>Fecha Compra</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var compra in Model.HistorialCompras)
                {
                    <tr>
                        <td>@compra.CompraID</td>
                        <td>@compra.Producto</td>
                        <td>@compra.Cantidad</td>
                        <td>@compra.PrecioUnitario.ToString("C")</td>
                        <td>@compra.Total.ToString("C")</td>
                        <td>@compra.FechaCompra</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>No hay compras registradas para este cliente.</p>
    }

    <div class="mt-4">
        <a asp-action="Edit" asp-route-id="@Model.ClienteID" class="btn btn-warning me-2">
            <i class="bi bi-pencil-square me-1"></i> Editar
        </a>
        <a asp-action="Index" class="btn btn-secondary">
            <i class="bi bi-arrow-left me-1"></i> Volver
        </a>
    </div>
</div>
