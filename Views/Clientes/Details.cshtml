<!-- Agregar a Views/Clientes/Details.cshtml -->

@if (Model.AptoCredito)
{
    <div class="card mt-3 bg-dark text-light">
        <div class="card-header">
            <h5 class="mb-0">Gestión de Crédito</h5>
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-4">
                    <p><strong>Límite de Crédito:</strong> @Model.LimiteCreditoInicial.ToString("C")</p>
                </div>
                <div class="col-md-4">
                    <p><strong>Saldo:</strong> @Model.Saldo.ToString("C")</p>
                </div>
                <div class="col-md-4">
                    <p><strong>Saldo Disponible:</strong> @Model.SaldoDisponible.ToString("C")</p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <form asp-action="AjustarCredito" method="post" class="d-flex gap-2">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="id" value="@Model.ClienteID" />
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="number" name="nuevoLimite" class="form-control bg-secondary text-light" value="@Model.LimiteCreditoInicial" min="0" step="0.01" />
                            <button type="submit" class="btn btn-primary">Ajustar Límite</button>
                        </div>
                    </form>
                </div>
                <div class="col-md-4 text-end">
                    @if (Model.RequiereGarante)
                    {
                        @if (Model.GaranteID.HasValue)
                        {
                            <a href="#detalleGarante" class="btn btn-info">
                                <i class="bi bi-person-badge me-1"></i> Ver Garante
                            </a>
                        }
                        else
                        {
                            <a asp-action="AsignarGarante" asp-route-id="@Model.ClienteID" class="btn btn-warning">
                                <i class="bi bi-person-plus me-1"></i> Asignar Garante
                            </a>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
}